<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Machine (XML.Backend.Machine)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../_odoc-theme/odoc.css"/><meta name="generator" content="odoc 3.1.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../../index.html">Index</a> &#x00BB; <a href="../../index.html">XML</a> &#x00BB; <a href="../index.html">Backend</a> &#x00BB; Machine</nav><header class="odoc-preamble"><h1>Module <code><span>Backend.Machine</span></code></h1><p>Copyright 2024, Mikhail Gavrilenko, Danila Rudnev-Stepanyan</p></header><div class="odoc-content"><p>SPDX-License-Identifier: LGPL-3.0-or-later</p><div class="odoc-spec"><div class="spec type anchored" id="type-reg"><a href="#type-reg" class="anchor"></a><code><span><span class="keyword">type</span> reg</span><span> = </span></code><ol><li id="type-reg.A" class="def variant constructor anchored"><a href="#type-reg.A" class="anchor"></a><code><span>| </span><span><span class="constructor">A</span> <span class="keyword">of</span> int</span></code></li><li id="type-reg.T" class="def variant constructor anchored"><a href="#type-reg.T" class="anchor"></a><code><span>| </span><span><span class="constructor">T</span> <span class="keyword">of</span> int</span></code></li><li id="type-reg.S" class="def variant constructor anchored"><a href="#type-reg.S" class="anchor"></a><code><span>| </span><span><span class="constructor">S</span> <span class="keyword">of</span> int</span></code></li><li id="type-reg.RA" class="def variant constructor anchored"><a href="#type-reg.RA" class="anchor"></a><code><span>| </span><span><span class="constructor">RA</span></span></code></li><li id="type-reg.SP" class="def variant constructor anchored"><a href="#type-reg.SP" class="anchor"></a><code><span>| </span><span><span class="constructor">SP</span></span></code></li><li id="type-reg.Zero" class="def variant constructor anchored"><a href="#type-reg.Zero" class="anchor"></a><code><span>| </span><span><span class="constructor">Zero</span></span></code></li></ol></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-equal_reg"><a href="#val-equal_reg" class="anchor"></a><code><span><span class="keyword">val</span> equal_reg : <span><a href="#type-reg">reg</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-reg">reg</a> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-pp_reg"><a href="#val-pp_reg" class="anchor"></a><code><span><span class="keyword">val</span> pp_reg : <span><span class="xref-unresolved">Stdlib</span>.Format.formatter <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-reg">reg</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-offset"><a href="#type-offset" class="anchor"></a><code><span><span class="keyword">type</span> offset</span><span> = <a href="#type-reg">reg</a> * int</span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-instr"><a href="#type-instr" class="anchor"></a><code><span><span class="keyword">type</span> instr</span><span> = </span></code><ol><li id="type-instr.Addi" class="def variant constructor anchored"><a href="#type-instr.Addi" class="anchor"></a><code><span>| </span><span><span class="constructor">Addi</span> <span class="keyword">of</span> <a href="#type-reg">reg</a> * <a href="#type-reg">reg</a> * int</span></code></li><li id="type-instr.Add" class="def variant constructor anchored"><a href="#type-instr.Add" class="anchor"></a><code><span>| </span><span><span class="constructor">Add</span> <span class="keyword">of</span> <a href="#type-reg">reg</a> * <a href="#type-reg">reg</a> * <a href="#type-reg">reg</a></span></code></li><li id="type-instr.Sub" class="def variant constructor anchored"><a href="#type-instr.Sub" class="anchor"></a><code><span>| </span><span><span class="constructor">Sub</span> <span class="keyword">of</span> <a href="#type-reg">reg</a> * <a href="#type-reg">reg</a> * <a href="#type-reg">reg</a></span></code></li><li id="type-instr.Mul" class="def variant constructor anchored"><a href="#type-instr.Mul" class="anchor"></a><code><span>| </span><span><span class="constructor">Mul</span> <span class="keyword">of</span> <a href="#type-reg">reg</a> * <a href="#type-reg">reg</a> * <a href="#type-reg">reg</a></span></code></li><li id="type-instr.Slt" class="def variant constructor anchored"><a href="#type-instr.Slt" class="anchor"></a><code><span>| </span><span><span class="constructor">Slt</span> <span class="keyword">of</span> <a href="#type-reg">reg</a> * <a href="#type-reg">reg</a> * <a href="#type-reg">reg</a></span></code></li><li id="type-instr.Seqz" class="def variant constructor anchored"><a href="#type-instr.Seqz" class="anchor"></a><code><span>| </span><span><span class="constructor">Seqz</span> <span class="keyword">of</span> <a href="#type-reg">reg</a> * <a href="#type-reg">reg</a></span></code></li><li id="type-instr.Snez" class="def variant constructor anchored"><a href="#type-instr.Snez" class="anchor"></a><code><span>| </span><span><span class="constructor">Snez</span> <span class="keyword">of</span> <a href="#type-reg">reg</a> * <a href="#type-reg">reg</a></span></code></li><li id="type-instr.Xor" class="def variant constructor anchored"><a href="#type-instr.Xor" class="anchor"></a><code><span>| </span><span><span class="constructor">Xor</span> <span class="keyword">of</span> <a href="#type-reg">reg</a> * <a href="#type-reg">reg</a> * <a href="#type-reg">reg</a></span></code></li><li id="type-instr.Xori" class="def variant constructor anchored"><a href="#type-instr.Xori" class="anchor"></a><code><span>| </span><span><span class="constructor">Xori</span> <span class="keyword">of</span> <a href="#type-reg">reg</a> * <a href="#type-reg">reg</a> * int</span></code></li><li id="type-instr.Beq" class="def variant constructor anchored"><a href="#type-instr.Beq" class="anchor"></a><code><span>| </span><span><span class="constructor">Beq</span> <span class="keyword">of</span> <a href="#type-reg">reg</a> * <a href="#type-reg">reg</a> * string</span></code></li><li id="type-instr.Blt" class="def variant constructor anchored"><a href="#type-instr.Blt" class="anchor"></a><code><span>| </span><span><span class="constructor">Blt</span> <span class="keyword">of</span> <a href="#type-reg">reg</a> * <a href="#type-reg">reg</a> * string</span></code></li><li id="type-instr.Ble" class="def variant constructor anchored"><a href="#type-instr.Ble" class="anchor"></a><code><span>| </span><span><span class="constructor">Ble</span> <span class="keyword">of</span> <a href="#type-reg">reg</a> * <a href="#type-reg">reg</a> * string</span></code></li><li id="type-instr.Lla" class="def variant constructor anchored"><a href="#type-instr.Lla" class="anchor"></a><code><span>| </span><span><span class="constructor">Lla</span> <span class="keyword">of</span> <a href="#type-reg">reg</a> * string</span></code></li><li id="type-instr.Li" class="def variant constructor anchored"><a href="#type-instr.Li" class="anchor"></a><code><span>| </span><span><span class="constructor">Li</span> <span class="keyword">of</span> <a href="#type-reg">reg</a> * int</span></code></li><li id="type-instr.Ld" class="def variant constructor anchored"><a href="#type-instr.Ld" class="anchor"></a><code><span>| </span><span><span class="constructor">Ld</span> <span class="keyword">of</span> <a href="#type-reg">reg</a> * <a href="#type-offset">offset</a></span></code></li><li id="type-instr.Sd" class="def variant constructor anchored"><a href="#type-instr.Sd" class="anchor"></a><code><span>| </span><span><span class="constructor">Sd</span> <span class="keyword">of</span> <a href="#type-reg">reg</a> * <a href="#type-offset">offset</a></span></code></li><li id="type-instr.Mv" class="def variant constructor anchored"><a href="#type-instr.Mv" class="anchor"></a><code><span>| </span><span><span class="constructor">Mv</span> <span class="keyword">of</span> <a href="#type-reg">reg</a> * <a href="#type-reg">reg</a></span></code></li><li id="type-instr.Comment" class="def variant constructor anchored"><a href="#type-instr.Comment" class="anchor"></a><code><span>| </span><span><span class="constructor">Comment</span> <span class="keyword">of</span> string</span></code></li><li id="type-instr.Label" class="def variant constructor anchored"><a href="#type-instr.Label" class="anchor"></a><code><span>| </span><span><span class="constructor">Label</span> <span class="keyword">of</span> string</span></code></li><li id="type-instr.Call" class="def variant constructor anchored"><a href="#type-instr.Call" class="anchor"></a><code><span>| </span><span><span class="constructor">Call</span> <span class="keyword">of</span> string</span></code></li><li id="type-instr.J" class="def variant constructor anchored"><a href="#type-instr.J" class="anchor"></a><code><span>| </span><span><span class="constructor">J</span> <span class="keyword">of</span> string</span></code></li><li id="type-instr.Ecall" class="def variant constructor anchored"><a href="#type-instr.Ecall" class="anchor"></a><code><span>| </span><span><span class="constructor">Ecall</span></span></code></li><li id="type-instr.Ret" class="def variant constructor anchored"><a href="#type-instr.Ret" class="anchor"></a><code><span>| </span><span><span class="constructor">Ret</span></span></code></li></ol></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-pp_instr"><a href="#val-pp_instr" class="anchor"></a><code><span><span class="keyword">val</span> pp_instr : <span><span class="xref-unresolved">Stdlib</span>.Format.formatter <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-instr">instr</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-addi"><a href="#val-addi" class="anchor"></a><code><span><span class="keyword">val</span> addi : <span><span>(<span><a href="#type-instr">instr</a> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-reg">reg</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-reg">reg</a> <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-add"><a href="#val-add" class="anchor"></a><code><span><span class="keyword">val</span> add : <span><span>(<span><a href="#type-instr">instr</a> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-reg">reg</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-reg">reg</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-reg">reg</a> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-sub"><a href="#val-sub" class="anchor"></a><code><span><span class="keyword">val</span> sub : <span><span>(<span><a href="#type-instr">instr</a> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-reg">reg</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-reg">reg</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-reg">reg</a> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-mul"><a href="#val-mul" class="anchor"></a><code><span><span class="keyword">val</span> mul : <span><span>(<span><a href="#type-instr">instr</a> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-reg">reg</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-reg">reg</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-reg">reg</a> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-slt"><a href="#val-slt" class="anchor"></a><code><span><span class="keyword">val</span> slt : <span><span>(<span><a href="#type-instr">instr</a> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-reg">reg</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-reg">reg</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-reg">reg</a> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-seqz"><a href="#val-seqz" class="anchor"></a><code><span><span class="keyword">val</span> seqz : <span><span>(<span><a href="#type-instr">instr</a> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-reg">reg</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-reg">reg</a> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-snez"><a href="#val-snez" class="anchor"></a><code><span><span class="keyword">val</span> snez : <span><span>(<span><a href="#type-instr">instr</a> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-reg">reg</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-reg">reg</a> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-xor"><a href="#val-xor" class="anchor"></a><code><span><span class="keyword">val</span> xor : <span><span>(<span><a href="#type-instr">instr</a> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-reg">reg</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-reg">reg</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-reg">reg</a> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-xori"><a href="#val-xori" class="anchor"></a><code><span><span class="keyword">val</span> xori : <span><span>(<span><a href="#type-instr">instr</a> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-reg">reg</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-reg">reg</a> <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-li"><a href="#val-li" class="anchor"></a><code><span><span class="keyword">val</span> li : <span><span>(<span><a href="#type-instr">instr</a> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-reg">reg</a> <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-ecall"><a href="#val-ecall" class="anchor"></a><code><span><span class="keyword">val</span> ecall : <span><span>(<span><a href="#type-instr">instr</a> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-call"><a href="#val-call" class="anchor"></a><code><span><span class="keyword">val</span> call : <span><span>(<span><a href="#type-instr">instr</a> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-ret"><a href="#val-ret" class="anchor"></a><code><span><span class="keyword">val</span> ret : <span><span>(<span><a href="#type-instr">instr</a> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-lla"><a href="#val-lla" class="anchor"></a><code><span><span class="keyword">val</span> lla : <span><span>(<span><a href="#type-instr">instr</a> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-reg">reg</a> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-ld"><a href="#val-ld" class="anchor"></a><code><span><span class="keyword">val</span> ld : <span><span>(<span><a href="#type-instr">instr</a> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-reg">reg</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-offset">offset</a> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-sd"><a href="#val-sd" class="anchor"></a><code><span><span class="keyword">val</span> sd : <span><span>(<span><a href="#type-instr">instr</a> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-reg">reg</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-offset">offset</a> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-mv"><a href="#val-mv" class="anchor"></a><code><span><span class="keyword">val</span> mv : <span><span>(<span><a href="#type-instr">instr</a> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-reg">reg</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-reg">reg</a> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-beq"><a href="#val-beq" class="anchor"></a><code><span><span class="keyword">val</span> beq : <span><span>(<span><a href="#type-instr">instr</a> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-reg">reg</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-reg">reg</a> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-blt"><a href="#val-blt" class="anchor"></a><code><span><span class="keyword">val</span> blt : <span><span>(<span><a href="#type-instr">instr</a> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-reg">reg</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-reg">reg</a> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-ble"><a href="#val-ble" class="anchor"></a><code><span><span class="keyword">val</span> ble : <span><span>(<span><a href="#type-instr">instr</a> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-reg">reg</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-reg">reg</a> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-j"><a href="#val-j" class="anchor"></a><code><span><span class="keyword">val</span> j : <span><span>(<span><a href="#type-instr">instr</a> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-comment"><a href="#val-comment" class="anchor"></a><code><span><span class="keyword">val</span> comment : <span><span>(<span><a href="#type-instr">instr</a> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-label"><a href="#val-label" class="anchor"></a><code><span><span class="keyword">val</span> label : <span><span>(<span><a href="#type-instr">instr</a> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span></span></code></div></div></div></body></html>
